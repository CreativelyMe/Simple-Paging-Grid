(function(a){function b(a,b,c){return a.slice(b*c,b*c+c)}a.fn.simplePagingGrid=function(c){var d=a.extend({buttonBarTemplate:'<div><button class="btn">« Prev</button><button class="btn pull-right">Next &raquo</button></div><div class="clearfix"></div>',tableTemplate:"<table><thead></thead><tbody></tbody></table>",headerTemplate:'<th width="{{width}}">{{title}}</th>',sortableHeaderTemplate:'<th width="{{width}}"><ul class="sort"><li class="sort-ascending"/><li class="sort-descending"/></ul>{{title}}</th>',emptyCellTemplate:"<td> </td>",loadingOverlayTemplate:'<div class="loading"></div>'},c.templates);var e=a.extend({pageSize:10,columnWidths:[],cellTemplates:null,headerTemplates:null,sortable:[],sortOrder:"asc",initialSortColumn:null,tableClass:"table",dataFunction:null,dataUrl:null,data:null,minimumVisibleRows:10,showLoadingOverlay:true},c);e.templates=d;return this.each(function(){function t(){if(n){k.attr("disabled","disabled");l.attr("disabled","disabled")}else{if(i===0){k.attr("disabled","disabled")}else{k.removeAttr("disabled")}if(m.length<e.pageSize){l.attr("disabled","disabled")}else{l.removeAttr("disabled")}}}function u(){if(r!=null){r.width(s.width());r.height(s.height())}}function v(){if(e.showLoadingOverlay){r=a(e.templates.loadingOverlayTemplate);u();s.prepend(r)}}function w(){if(r!==null){r.remove();r=null}}function x(c){var d;var f;var g;if(c!==undefined){e.dataUrl=c;i=0}if(e.data!==null){d=p===null?e.data:e.data.sort(function(b,c){f=o==="asc"?b[p]:c[p];g=o==="asc"?c[p]:b[p];if(a.isNumeric(f)){if(f<g){return 1}else if(f>g){return-1}return 0}return f.localeCompare(g)});m=b(d,i,e.pageSize);y();t()}else if(e.dataUrl!==null){n=true;t();v();a.getJSON(e.dataUrl,{page:i,pageSize:e.pageSize,sortColumn:p,sortOrder:o},function(a){m=a;y();n=false;t();w()})}else if(e.dataFunction!==null){m=e.dataFunction(i,e.pageSize,p,o);y();t()}}function y(){d.empty();a.each(m,function(b,c){var f=a("<tr>");a.each(e.columnKeys,function(b,d){var g=a("<td>");if(e.cellTemplates!==null&&b<e.cellTemplates.length&&e.cellTemplates[b]!==null){g.html(Mustache.render(e.cellTemplates[b],c))}else{g.html(c[d])}f.append(g)});d.append(f)});if(m.length<e.minimumVisibleRows){var b;var c;for(b=m.length;b<e.minimumVisibleRows;b++){c=a("<tr>");a.each(e.columnKeys,function(){c.append(Mustache.render(e.templates.emptyCellTemplate))});d.append(c)}}}var c;var d;var f;var g;var h;var i=0;var j;var k;var l;var m;var n=false;var o=e.sortOrder;var p=e.initialSortColumn;var q=null;var r=null;var s=a(this);c=a(e.templates.tableTemplate);f=c.find("thead");g=a("<tr>").appendTo(f);d=c.find("tbody");a.each(e.columnNames,function(b,c){var d=e.sortable[b];var f;var h;var i=e.columnKeys[b];var j;var k=null;j=e.columnWidths.length>b?e.columnWidths[b]:"";if(e.headerTemplates!==null&&b<e.headerTemplates.length&&e.headerTemplates[b]!=null){k=a(Mustache.render(e.headerTemplates[b],{width:j,title:c}))}if(d){if(k===null){k=a(Mustache.render(e.templates.sortableHeaderTemplate,{width:j,title:c}))}f=k.find(".sort-ascending");h=k.find(".sort-descending");function l(a){a.preventDefault();if(p===i){o=o==="asc"?"desc":"asc"}p=i;if(q!=null){q.removeClass("sort-ascending-active");q.removeClass("sort-descending-active")}q=o==="asc"?f:h;q.addClass(o==="asc"?"sort-ascending-active":"sort-descending-active");x()}f.click(function(a){l(a)});h.click(function(a){l(a)})}else{if(k===null){k=a(Mustache.render(e.templates.headerTemplate,{width:j,title:c}))}}g.append(k)});c.addClass(e.tableClass);buttonBarHtml=e.templates.buttonBarTemplate;j=a(buttonBarHtml);k=j.find("button").first();l=j.find("button").last();k.click(function(a){a.preventDefault();if(i>0){i--;x()}});l.click(function(a){a.preventDefault();if(m.length===e.pageSize){i++;x()}});x();s.append(c);s.append(j);a(window).resize(u);this.refreshData=x;return this})}})(jQuery)